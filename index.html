<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <title>Productivity Dashboard</title>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a5b4fc;
            --accent: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }
        
        .card {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .tab-active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 500;
        }
        
        .timer-display {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }
        
        .checkbox:checked + .checkmark {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        
        .checkbox:checked + .checkmark:after {
            display: block;
        }
        
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
            left: 5px;
            top: 1px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        
        [type="time"]::-webkit-calendar-picker-indicator {
            filter: invert(0.5);
        }
    </style>
</head>
<body class="min-h-screen p-8">
    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Left Column -->
        <div class="space-y-6">
            <!-- Timer Section -->
            <div class="card bg-white rounded-xl p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">Focus Timer</h2>
                    <button id="resetTimer" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
                <div class="timer-display text-5xl font-bold text-center py-6 text-gray-800" id="timerDisplay">
                    25:00
                </div>
                <div class="flex justify-center space-x-4">
                    <button id="startTimer" class="px-6 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition">
                        <i class="fas fa-play mr-2"></i>Start
                    </button>
                    <button id="pauseTimer" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition">
                        <i class="fas fa-pause mr-2"></i>Pause
                    </button>
                </div>
                <div class="mt-6 grid grid-cols-3 gap-2">
                    <button data-minutes="25" class="timer-preset py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm">25 min</button>
                    <button data-minutes="50" class="timer-preset py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm">50 min</button>
                    <button data-minutes="90" class="timer-preset py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm">90 min</button>
                </div>
            </div>
            
            <!-- Reminders Section -->
            <div class="card bg-white rounded-xl p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Reminders</h2>
                <div class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <div class="flex-grow">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
                            <input type="text" id="reminderMessage" placeholder="Your reminder..." 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Time</label>
                            <input type="time" id="reminderTime" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Frequency</label>
                            <select id="reminderFrequency" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="once">Once</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex space-x-2">
                        <label class="inline-flex items-center">
                            <input type="checkbox" id="emailReminder" class="form-checkbox h-4 w-4 text-indigo-600">
                            <span class="ml-2 text-sm text-gray-700">Email</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="checkbox" id="smsReminder" class="form-checkbox h-4 w-4 text-indigo-600">
                            <span class="ml-2 text-sm text-gray-700">SMS</span>
                        </label>
                    </div>
                    
                    <button id="setReminder" class="w-full py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition">
                        <i class="fas fa-bell mr-2"></i> Set Reminder
                    </button>
                </div>
                
                <div class="mt-6">
                    <h3 class="font-medium text-gray-700 mb-2">Upcoming Reminders</h3>
                    <div id="reminderList" class="space-y-2 max-h-40 overflow-y-auto"></div>
                </div>
            </div>
        </div>
        
        <!-- Center Column -->
        <div class="space-y-6">
            <!-- To-Do List -->
            <div class="card bg-white rounded-xl p-6 h-full">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">Tasks</h2>
                    <div class="flex space-x-1">
                        <button id="dayView" class="px-3 py-1 text-sm tab-active">
                            <i class="fas fa-calendar-day mr-1"></i> Day
                        </button>
                        <button id="monthView" class="px-3 py-1 text-sm text-gray-600 hover:text-gray-800">
                            <i class="fas fa-calendar-alt mr-1"></i> Month
                        </button>
                    </div>
                </div>
                
                <!-- Day View (default) -->
                <div id="dayTasks" class="space-y-3">
                    <div class="flex">
                        <input type="text" id="newDayTask" placeholder="Add a task..." 
                               class="flex-grow px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <button id="addDayTask" class="px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div id="dayTaskList" class="space-y-2"></div>
                </div>
                
                <!-- Month View (hidden by default) -->
                <div id="monthTasks" class="space-y-3 hidden">
                    <div class="flex mb-4">
                        <select id="monthSelector" class="flex-grow px-3 py-2 border border-gray-300 rounded-md">
                            <option value="0">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11">December</option>
                        </select>
                    </div>
                    <div class="flex">
                        <input type="text" id="newMonthTask" placeholder="Add a monthly task..." 
                               class="flex-grow px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <button id="addMonthTask" class="px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div id="monthTaskList" class="space-y-2"></div>
                </div>
            </div>
        </div>
        
        <!-- Right Column -->
        <div class="space-y-6">
            <!-- Stats Section -->
            <div class="card bg-white rounded-xl p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Today's Stats</h2>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="text-blue-600 mb-1">
                            <i class="fas fa-clock text-xl"></i>
                        </div>
                        <div class="font-semibold text-gray-800">Focus Time</div>
                        <div id="todayFocusTime" class="text-2xl font-bold">0h 0m</div>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="text-green-600 mb-1">
                            <i class="fas fa-check-circle text-xl"></i>
                        </div>
                        <div class="font-semibold text-gray-800">Tasks Completed</div>
                        <div id="todayCompletedTasks" class="text-2xl font-bold">0</div>
                    </div>
                </div>
            </div>
            
            <!-- Upcoming Tasks Section -->
            <div class="card bg-white rounded-xl p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Upcoming Tasks</h2>
                <div id="upcomingTaskList" class="space-y-3">
                    <div class="p-3 bg-gray-50 rounded-lg border-l-4 border-indigo-500">
                        <div class="flex justify-between">
                            <div class="font-medium">Complete project proposal</div>
                            <div class="text-sm text-gray-500">Tomorrow</div>
                        </div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-lg border-l-4 border-green-500">
                        <div class="flex justify-between">
                            <div class="font-medium">Team meeting</div>
                            <div class="text-sm text-gray-500">Next Week</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Notes -->
            <div class="card bg-white rounded-xl p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Quick Notes</h2>
                <textarea id="quickNotes" placeholder="Jot down quick notes..." 
                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 h-24"></textarea>
                <button id="saveNotes" class="mt-3 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">
                    <i class="fas fa-save mr-2"></i> Save Notes
                </button>
            </div>
        </div>
    </div>

    <!-- Success Notification (hidden by default) -->
    <div id="notification" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transition-opacity duration-300 opacity-0 hidden">
        <div class="flex items-center space-x-2">
            <i class="fas fa-check-circle"></i>
            <span id="notificationMessage">Success!</span>
        </div>
    </div>

    <!-- Modal for Reminder Details -->
    <div id="reminderModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-lg font-semibold mb-4">Reminder Details</h3>
            <div class="space-y-3">
                <div>
                    <span class="font-medium">Message:</span>
                    <span id="modalMessage" class="ml-2"></span>
                </div>
                <div>
                    <span class="font-medium">Time:</span>
                    <span id="modalTime" class="ml-2"></span>
                </div>
                <div>
                    <span class="font-medium">Frequency:</span>
                    <span id="modalFrequency" class="ml-2"></span>
                </div>
                <div class="flex space-x-2">
                    <span class="font-medium">Channels:</span>
                    <span id="modalChannels" class="ml-2"></span>
                </div>
            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button id="cancelReminder" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">
                    Cancel
                </button>
                <button id="deleteReminder" class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600">
                    Delete
                </button>
            </div>
        </div>
    </div>

    <script>
        // Timer functionality
        let timer;
        let timeLeft = 25 * 60; // 25 minutes in seconds
        let isRunning = false;
        let todayFocusSeconds = 0;
        
        // DOM elements
        const timerDisplay = document.getElementById('timerDisplay');
        const startTimer = document.getElementById('startTimer');
        const pauseTimer = document.getElementById('pauseTimer');
        const resetTimer = document.getElementById('resetTimer');
        const timerPresets = document.querySelectorAll('.timer-preset');
        
        // Task elements
        const dayView = document.getElementById('dayView');
        const monthView = document.getElementById('monthView');
        const dayTasks = document.getElementById('dayTasks');
        const monthTasks = document.getElementById('monthTasks');
        const newDayTask = document.getElementById('newDayTask');
        const addDayTask = document.getElementById('addDayTask');
        const dayTaskList = document.getElementById('dayTaskList');
        const monthSelector = document.getElementById('monthSelector');
        const newMonthTask = document.getElementById('newMonthTask');
        const addMonthTask = document.getElementById('addMonthTask');
        const monthTaskList = document.getElementById('monthTaskList');
        const todayFocusTime = document.getElementById('todayFocusTime');
        const todayCompletedTasks = document.getElementById('todayCompletedTasks');
        const upcomingTaskList = document.getElementById('upcomingTaskList');
        
        // Reminder elements
        const reminderMessage = document.getElementById('reminderMessage');
        const reminderTime = document.getElementById('reminderTime');
        const reminderFrequency = document.getElementById('reminderFrequency');
        const emailReminder = document.getElementById('emailReminder');
        const smsReminder = document.getElementById('smsReminder');
        const setReminder = document.getElementById('setReminder');
        const reminderList = document.getElementById('reminderList');
        
        // Notes elements
        const quickNotes = document.getElementById('quickNotes');
        const saveNotes = document.getElementById('saveNotes');
        
        // Notification and modal elements
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');
        const reminderModal = document.getElementById('reminderModal');
        const modalMessage = document.getElementById('modalMessage');
        const modalTime = document.getElementById('modalTime');
        const modalFrequency = document.getElementById('modalFrequency');
        const modalChannels = document.getElementById('modalChannels');
        const cancelReminder = document.getElementById('cancelReminder');
        const deleteReminder = document.getElementById('deleteReminder');
        
        // Initialize
        updateTimerDisplay();
        loadTasks();
        loadReminders();
        loadNotes();
        
        // Timer functions
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function timerEnd() {
            clearInterval(timer);
            isRunning = false;
            todayFocusSeconds += (25 * 60) - timeLeft;
            updateTodayFocusTime();
            showNotification('Focus session completed! Time for a break.');
            // Play alarm sound
            const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
            audio.play();
            timeLeft = 25 * 60;
            updateTimerDisplay();
        }
        
        function startTimerFn() {
            if (!isRunning) {
                isRunning = true;
                timer = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) {
                        timerEnd();
                    }
                }, 1000);
                startTimer.classList.add('hidden');
                pauseTimer.classList.remove('hidden');
            }
        }
        
        function pauseTimerFn() {
            if (isRunning) {
                clearInterval(timer);
                isRunning = false;
                todayFocusSeconds += (25 * 60) - timeLeft;
                updateTodayFocusTime();
                startTimer.classList.remove('hidden');
                pauseTimer.classList.add('hidden');
            }
        }
        
        function resetTimerFn() {
            clearInterval(timer);
            isRunning = false;
            timeLeft = 25 * 60;
            updateTimerDisplay();
            startTimer.classList.remove('hidden');
            pauseTimer.classList.add('hidden');
        }
        
        function updateTodayFocusTime() {
            const hours = Math.floor(todayFocusSeconds / 3600);
            const minutes = Math.floor((todayFocusSeconds % 3600) / 60);
            todayFocusTime.textContent = `${hours}h ${minutes}m`;
        }
        
        // Task functions
        function loadTasks() {
            const savedDayTasks = localStorage.getItem('dayTasks');
            const savedMonthTasks = localStorage.getItem('monthTasks');
            const savedCompletedCount = localStorage.getItem('completedTasks') || 0;
            
            todayCompletedTasks.textContent = savedCompletedCount;
            
            if (savedDayTasks) {
                dayTaskList.innerHTML = savedDayTasks;
                addTaskEventListeners(dayTaskList);
            }
            
            if (savedMonthTasks) {
                monthTaskList.innerHTML = savedMonthTasks;
                addTaskEventListeners(monthTaskList);
            }
            
            checkForUpcomingTasks();
        }
        
        function saveTasks() {
            localStorage.setItem('dayTasks', dayTaskList.innerHTML);
            localStorage.setItem('monthTasks', monthTaskList.innerHTML);
        }
        
        function addTask(listElement, taskText) {
            if (taskText.trim() === '') return;
            
            const taskId = Date.now();
            const taskElement = document.createElement('div');
            taskElement.className = 'flex items-center p-2 bg-gray-50 rounded hover:bg-gray-100';
            taskElement.innerHTML = `
                <label class="flex items-center space-x-3 w-full cursor-pointer">
                    <input type="checkbox" id="task-${taskId}" class="checkbox sr-only">
                    <span class="checkmark relative w-5 h-5 border border-gray-300 rounded-sm"></span>
                    <span class="task-text flex-grow">${taskText}</span>
                    <button class="delete-task text-gray-400 hover:text-red-500">
                        <i class="fas fa-trash"></i>
                    </button>
                </label>
            `;
            
            listElement.prepend(taskElement);
            saveTasks();
            checkForUpcomingTasks();
            
            // Add event listeners to the new task
            const checkbox = taskElement.querySelector('.checkbox');
            const deleteBtn = taskElement.querySelector('.delete-task');
            
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    const completedCount = parseInt(todayCompletedTasks.textContent) + 1;
                    todayCompletedTasks.textContent = completedCount;
                    localStorage.setItem('completedTasks', completedCount);
                    setTimeout(() => {
                        taskElement.remove();
                        saveTasks();
                    }, 300);
                }
            });
            
            deleteBtn.addEventListener('click', function() {
                taskElement.remove();
                saveTasks();
                checkForUpcomingTasks();
            });
        }
        
        function addTaskEventListeners(listElement) {
            listElement.querySelectorAll('.checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        const completedCount = parseInt(todayCompletedTasks.textContent) + 1;
                        todayCompletedTasks.textContent = completedCount;
                        localStorage.setItem('completedTasks', completedCount);
                        setTimeout(() => {
                            this.closest('div.flex').remove();
                            saveTasks();
                            checkForUpcomingTasks();
                        }, 300);
                    }
                });
            });
            
            listElement.querySelectorAll('.delete-task').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('div.flex').remove();
                    saveTasks();
                    checkForUpcomingTasks();
                });
            });
        }
        
        function checkForUpcomingTasks() {
            // This is a simplified version - in a real app you'd have more sophisticated logic
            const dayTasks = dayTaskList.children.length;
            const monthTasks = monthTaskList.children.length;
            
            upcomingTaskList.innerHTML = '';
            
            if (dayTasks > 0) {
                const upcoming = document.createElement('div');
                upcoming.className = 'p-3 bg-gray-50 rounded-lg border-l-4 border-indigo-500';
                upcoming.innerHTML = `
                    <div class="flex justify-between">
                        <div class="font-medium">${dayTasks} pending daily task${dayTasks > 1 ? 's' : ''}</div>
                        <div class="text-sm text-gray-500">Today</div>
                    </div>
                `;
                upcomingTaskList.appendChild(upcoming);
            }
            
            if (monthTasks > 0) {
                const monthName = monthSelector.options[monthSelector.selectedIndex].text;
                const upcoming = document.createElement('div');
                upcoming.className = 'p-3 bg-gray-50 rounded-lg border-l-4 border-green-500';
                upcoming.innerHTML = `
                    <div class="flex justify-between">
                        <div class="font-medium">${monthTasks} pending ${monthName} task${monthTasks > 1 ? 's' : ''}</div>
                        <div class="text-sm text-gray-500">This Month</div>
                    </div>
                `;
                upcomingTaskList.appendChild(upcoming);
            }
        }
        
        // Reminder functions
        function loadReminders() {
            const savedReminders = localStorage.getItem('reminders');
            if (savedReminders) {
                reminderList.innerHTML = savedReminders;
                addReminderEventListeners();
            }
        }
        
        function saveReminders() {
            localStorage.setItem('reminders', reminderList.innerHTML);
        }
        
        async function addReminder() {
            const message = reminderMessage.value.trim();
            const time = reminderTime.value;
            const frequency = reminderFrequency.value;
            const email = emailReminder.checked;
            const sms = smsReminder.checked;
            
            if (!message || !time || (!email && !sms)) {
                showNotification('Please fill all required fields', 'error');
                return;
            }
            
            const reminderId = Date.now();
            const reminderElement = document.createElement('div');
            reminderElement.dataset.id = reminderId;
            reminderElement.dataset.message = message;
            reminderElement.dataset.time = time;
            reminderElement.dataset.frequency = frequency;
            reminderElement.dataset.email = email;
            reminderElement.dataset.sms = sms;
            
            const frequencyText = frequency.charAt(0).toUpperCase() + frequency.slice(1);
            const channels = [];
            if (email) channels.push('Email');
            if (sms) channels.push('SMS');
            
            reminderElement.className = 'p-3 bg-gray-50 rounded-lg border-l-4 border-blue-500 hover:shadow transition cursor-pointer flex justify-between';
            reminderElement.innerHTML = `
                <div>
                    <div class="font-medium">${message}</div>
                    <div class="text-sm text-gray-500">${time} • ${frequencyText}</div>
                </div>
                <div class="flex items-center space-x-2">
                    ${email ? '<i class="fas fa-envelope text-blue-500"></i>' : ''}
                    ${sms ? '<i class="fas fa-sms text-green-500"></i>' : ''}
                </div>
            `;
            
            reminderList.prepend(reminderElement);
            reminderMessage.value = '';
            reminderTime.value = '';
            emailReminder.checked = false;
            smsReminder.checked = false;
            
            saveReminders();
            showNotification('Reminder set successfully!');
            addReminderEventListeners();
            
            // Send to backend service for automatic scheduling
            if (email || sms) {
                try {
                    await sendNotification({
                        id: reminderId,
                        message,
                        time,
                        frequency,
                        email,
                        sms
                    });
                    showNotification('Reminder scheduled with backend service!');
                } catch {
                    // Error already handled in sendNotification
                }
            }
        }
        
        function addReminderEventListeners() {
            document.querySelectorAll('#reminderList > div').forEach(reminder => {
                reminder.addEventListener('click', function() {
                    modalMessage.textContent = this.dataset.message;
                    modalTime.textContent = this.dataset.time;
                    modalFrequency.textContent = this.dataset.frequency.charAt(0).toUpperCase() + this.dataset.frequency.slice(1);
                    
                    const channels = [];
                    if (this.dataset.email === 'true') channels.push('Email');
                    if (this.dataset.sms === 'true') channels.push('SMS');
                    modalChannels.textContent = channels.join(', ');
                    
                    deleteReminder.dataset.id = this.dataset.id;
                    reminderModal.classList.remove('hidden');
                });
            });
        }
        
        function deleteReminderFn() {
            const id = deleteReminder.dataset.id;
            const reminder = document.querySelector(`#reminderList > div[data-id="${id}"]`);
            if (reminder) {
                reminder.remove();
                saveReminders();
                showNotification('Reminder deleted');
            }
            reminderModal.classList.add('hidden');
        }
        
        // Notes functions
        function scheduleReminder(reminder) {
            const [hours, minutes] = reminder.time.split(':').map(Number);
            const now = new Date();
            const sendTime = new Date(
                now.getFullYear(),
                now.getMonth(),
                now.getDate(),
                hours,
                minutes,
                0
            );
            
            // For demo purposes - in production use a proper scheduling service
            const timeUntilSend = sendTime - now;
            if (timeUntilSend > 0) {
                setTimeout(() => {
                    if (reminder.email) {
                        const emailText = `Reminder: ${reminder.message}\n\nScheduled for ${reminder.time}`;
                        window.open(`mailto:nikunjjindal07@gmail.com?subject=Reminder&body=${encodeURIComponent(emailText)}`, '_blank');
                    }
                    if (reminder.sms) {
                        const smsText = `REMINDER: ${reminder.message}`;
                        window.open(`sms:9350561630?body=${encodeURIComponent(smsText)}`, '_blank');
                    }
                }, timeUntilSend);
            }
        }

        function loadNotes() {
            const savedNotes = localStorage.getItem('quickNotes');
            if (savedNotes) {
                quickNotes.value = savedNotes;
            }
        }
        
        async function sendNotification(reminder) {
            try {
                const response = await fetch('https://your-backend-service.com/api/reminders', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: reminder.message,
                        time: reminder.time,
                        frequency: reminder.frequency,
                        email: reminder.email ? 'nikunjjindal07@gmail.com' : null,
                        sms: reminder.sms ? '9350561630' : null,
                        apiKey: 'your-api-key-here'
                    })
                });
                const result = await response.json();
                if (!response.ok) throw new Error(result.message);
                return result;
            } catch (error) {
                console.error('Error sending notification:', error);
                showNotification('Failed to set reminder', 'error');
                throw error;
            }
        }

        function saveNotesFn() {
            localStorage.setItem('quickNotes', quickNotes.value);
            showNotification('Notes saved');
        }
        
        // UI functions
        function showNotification(message, type = 'success') {
            notificationMessage.textContent = message;
            notification.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg transition-opacity duration-300 ${type === 'success' ? 'bg-green-500' : 'bg-red-500'} text-white flex items-center space-x-2`;
            notification.classList.remove('hidden', 'opacity-0');
            notification.classList.add('opacity-100');
            
            setTimeout(() => {
                notification.classList.remove('opacity-100');
                notification.classList.add('opacity-0');
                setTimeout(() => notification.classList.add('hidden'), 300);
            }, 3000);
        }
        
        // Event listeners
        startTimer.addEventListener('click', startTimerFn);
        pauseTimer.addEventListener('click', pauseTimerFn);
        resetTimer.addEventListener('click', resetTimerFn);
        
        timerPresets.forEach(preset => {
            preset.addEventListener('click', function() {
                timeLeft = parseInt(this.dataset.minutes) * 60;
                updateTimerDisplay();
                resetTimerFn();
            });
        });
        
        // Task event listeners
        dayView.addEventListener('click', function() {
            dayView.classList.add('tab-active');
            monthView.classList.remove('tab-active');
            dayTasks.classList.remove('hidden');
            monthTasks.classList.add('hidden');
        });
        
        monthView.addEventListener('click', function() {
            monthView.classList.add('tab-active');
            dayView.classList.remove('tab-active');
            monthTasks.classList.remove('hidden');
            dayTasks.classList.add('hidden');
            checkForUpcomingTasks();
        });
        
        addDayTask.addEventListener('click', function() {
            addTask(dayTaskList, newDayTask.value);
            newDayTask.value = '';
        });
        
        newDayTask.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addTask(dayTaskList, newDayTask.value);
                newDayTask.value = '';
            }
        });
        
        addMonthTask.addEventListener('click', function() {
            addTask(monthTaskList, newMonthTask.value);
            newMonthTask.value = '';
        });
        
        newMonthTask.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addTask(monthTaskList, newMonthTask.value);
                newMonthTask.value = '';
            }
        });
        
        monthSelector.addEventListener('change', function() {
            checkForUpcomingTasks();
        });
        
        // Reminder event listeners
        setReminder.addEventListener('click', addReminder);
        cancelReminder.addEventListener('click', function() {
            reminderModal.classList.add('hidden');
        });
        deleteReminder.addEventListener('click', deleteReminderFn);
        
        // Notes event listeners
        saveNotes.addEventListener('click', saveNotesFn);
        
        // Simulate sending reminders
        setInterval(() => {
            const now = new Date();
            const currentHours = now.getHours().toString().padStart(2, '0');
            const currentMinutes = now.getMinutes().toString().padStart(2, '0');
            const currentTime = `${currentHours}:${currentMinutes}`;
            
            document.querySelectorAll('#reminderList > div').forEach(reminder => {
                const reminderTime = reminder.dataset.time;
                if (reminderTime === currentTime) {
                    const message = reminder.dataset.message;
                    const email = reminder.dataset.email === 'true';
                    const sms = reminder.dataset.sms === 'true';
                    
                    const channelText = [];
                    if (email) channelText.push("email");
                    if (sms) channelText.push("SMS");
                    showNotification(`Reminder sent via ${channelText.join(" and ")}: ${message}`);
                    
                    // Backend handles all scheduling now
                    showNotification(`Backend will handle ${frequency} reminders`);
                }
            });
        }, 60000); // Check every minute
    </script>
</body>
</html>
